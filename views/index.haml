!!!
%html
  %head
    %title Ciber Squash
    %meta{'http-equiv' => "Content-Type", :content => "text/html; charset=utf-8"}
    %meta{:name => "viewport", :content => "width=device-width, initial-scale=1"}
    %link(rel="stylesheet" href="/css/pure-min.css")
    %link(rel="stylesheet" href="/css/grids-responsive-min.css")
    %link(rel="stylesheet" href="/css/style.css")
  %body
    .pure-menu.pure-menu-open.pure-menu-horizontal
      %a.pure-menu-heading{:href => "/"}
        Ciber Squash
      %ul
        %li.pure-menu-selected
          %a{:href => "/"} Home
        - if is_admin?
          %li
            %a{:href => "/admin"} Admin
        - unless is_logged_in?
          %li
            %a{:href => '/auth/google_oauth2'} Sign in with Google
    
    .pure-g
      - get_events.each do | key, value |
        .pure-u-1.pure-u-md-1-3.l-box
          - date = value["date"]
          - max = value["max"]
          - participants = value["participating"]
          - id = value["id"]
          %p
            Dato: #{date}
            %br
            Plasser: #{participants.size}/#{max}
            %br
            %form.pure-form.pure-form-aligned{:action => "/blimed?id=#{id}", :method => "POST"}
              %button.button-success.pure-button{:type => "submit"}
                - if participating
                Bli med
            %br
            %button.button-secondary.pure-button{:onclick => "toggleParticipators('#{key}')"}
              Se pÃ¥meldte
          %ol{:id => "participators-#{key}", :style => "display: none;"}
            - participants.each do | p |
              %li
                = p

:javascript
  function toggleParticipators(key) {
    var elem = document.getElementById("participators-" + key);
    if (elem.style.display === "none") {
      elem.style.display = "";
    } else {
      elem.style.display = "none";
    }
  }
